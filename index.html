<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>il bAzAr LaMuBy</title>
  <style>

input {
    width: 100%;
    padding: 0.5rem;
    margin: 0.5rem 0;
    border: 1px solid #ddd;
    border-radius: 5px;
}

form {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}


#btn-svuota, #btn-procedi {
    width: 50%;
    padding: 0.8rem;
    font-size: 1rem;
    border-radius: 5px;
    margin: 0.5rem 0;
    background: #6e3b6e; /* Stesso colore del pulsante "Chiudi" */
    color: white;
    border: none;
    cursor: pointer;
}

#modal-spedizione {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.25);
    z-index: 1000;
    max-width: 400px;
    width: 90%;
}


.modal {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.25);
    z-index: 1000;
    max-width: 600px; /* Aumentato da 90% a 600px */
    width: 70%;
}

.overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    z-index: 999;
}

.modal.active, .overlay.active {
    display: block;
}


    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
    }
    header {
      background-color: #6e3b6e;
      color: #fff;
      padding: 1rem;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
      text-transform: uppercase;
    }
    header p {
      margin: 0.5rem 0 0;
      font-style: italic;
    }
    .container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
    }
    .product {
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .product img {
      max-width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 4px;
    }
    .product h3, .product h2 {
      margin: 0.5rem 0;
    }
    .product:hover,
    .product.highlight {
      background-color: #eee;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      transform: scale(1.02);
    }
    .contact-button {
      display: block;
      margin: 2rem auto 0;
      padding: 0.5rem 1.5rem;
      background-color: #6e3b6e;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
    }
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.25);
      z-index: 1000;
      max-width: 90%;
    }
    .modal.active {
      display: block;
    }
    .overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    .overlay.active {
      display: block;
    }
    #dettaglio-articolo img {
      max-width: 100%;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background: #ddd;
      font-size: 0.9rem;
    }
    .piva {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: #555;
    }
    .highlight-blink {
	 background-color: #ffeb3b;
	color: #6e3b6e;
	font-weight: bold;
	padding: 0.3rem 0.6rem;
	border-radius: 5px;
	display: inline-block;
	animation: blink 1s infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}
.header-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1rem;
}

.logo {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid white;
  background-color: #fff;
}

.animated-title {
  overflow: hidden;
  border-right: .15em solid white;
  white-space: nowrap;
  animation: typing 3s steps(20, end), blink-caret .75s step-end infinite;
  font-size: 2rem;
  margin: 0;
  text-transform: uppercase;
}

@keyframes typing {
  from { width: 0 }
  to { width: 100% }
}

@keyframes blink-caret {
  from, to { border-color: transparent }
  50% { border-color: white }
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

#carrello-btn {
    display: inline-block;
    margin: 10px auto;
    padding: 1rem 2rem;
    background-color: #6e3b6e;
    color: white;
    font-size: 1.2rem;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    animation: bounce 1s ease-in-out 2; /* Effetto di rimbalzo */
}

#carrello-btn:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    transition: all 0.3s ease;
}


  </style>
</head>
<body>


  <header>
  <div class="header-content">
    <img src="lamuby_logo_bigtext.png" alt="Logo LaMuBy" class="logo">
    <div>
      <h1 class="animated-title">il bAzAr LaMuBy</h1>
      <p>- - Vendita di articoli usati - -</p>
    </div>
  </div>
</header>

<!-- Pulsante per aprire il carrello -->
<button onclick="mostraCarrello()" id="carrello-btn" style="display: block; margin: 1rem auto; padding: 1rem 2rem; background-color: #6e3b6e; color: white; font-size: 1.2rem; border: none; border-radius: 8px; cursor: pointer;">
    Carrello (<span id="contatore-carrello">0</span>)
</button>

  <div class="container">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.2rem;">
  <h2>I nostri articoli</h2>

<!-- Overlay oscurante -->
<div id="overlay-carrello" class="overlay"></div>

<!-- Finestra centrale del carrello -->
<div id="modal-carrello" class="modal">
    <p style="text-align: center; font-size: 0.9rem;">Salvare 3516100235 nella rubrica per completare l'ordine</p>
    <h2 style="text-align: center;">Il tuo carrello</h2>
    <ul id="lista-carrello" style="list-style: none; padding: 0;"></ul>
    <p id="totale-prezzo" style="text-align: center; font-weight: bold; font-size: 1.2rem; margin-top: 10px;">Totale: €0.00</p>
    <button id="btn-svuota" <button onclick="svuotaCarrello()" style="background: #d9534f; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: 1rem auto;">Svuota Carrello</button>
    <button id="btn-procedi"<button onclick="mostraModuloSpedizione()" style="background: #28a745; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: auto;">Procedi</button>
    <button onclick="chiudiCarrello()" style="background: #6e3b6e; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: auto;margin-top: 1.3rem;">Chiudi</button>
</div>

<!-- Finestra Modulo Spedizione -->
<div id="modal-spedizione" class="modal">
    <h2>Inserisci i dati di spedizione</h2>
    <form id="form-spedizione">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" required>

        <label for="indirizzo">Indirizzo:</label>
        <input type="text" id="indirizzo" required>

        <label for="telefono">Telefono:</label>
        <input type="tel" id="telefono" required>

        <label for="email">Email:</label>
        <input type="email" id="email" required>


<!-- Pulsante per inviare l'ordine via WhatsApp -->
    <button type="button" onclick="inviaOrdineWhatsApp()" style="background: #25d366; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: auto; margin-top: 10px;">
         Invia Ordine via WhatsApp
    </button>
    
    </form>
    <button onclick="chiudiModuloSpedizione()" style="background: #d9534f; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: auto;">Chiudi</button>
</div>

<!-- Popup di conferma ordine -->
<div id="popup-conferma" class="modal">
    <h2>✅ Ordine Confermato!</h2>
    <p>Grazie per il tuo acquisto! Ti contatteremo a breve per il pagamento e la spedizione.</p>
    <button onclick="chiudiPopupConferma()" style="background: #6e3b6e; color: white; padding: 0.8rem; border: none; border-radius: 5px; cursor: pointer; display: block; margin: auto;">Chiudi</button>
</div>


  </div>
    <div class="products">
      <div class="product" ontouchstart="evidenzia(this)" onclick="mostraDettaglio('PlayStation 5', 'Console PlayStation 5 con lettore disco usata poco e bene.<br><br><span class=\'highlight-blink\'>Info clicca su Contattaci<br>in fondo alla pagina', 'ps51.jpg', 'ps52.webp', 'Prezzo: €350')">
        <img src="ps51.jpg" alt="PlayStation 5">
        <h2>PlayStation 5</h2>
	<p class="price"><strong>Prezzo: €350</strong></p>
        <p>Console PlayStation 5 con lettore disco usata poco e bene.<br><br>articoli esempio sito dimostrativo</p>
 


      </div>

      <div class="product" ontouchstart="evidenzia(this)" onclick="mostraDettaglio('TV 65 pollici', 'TV 65 pollici usata pochissimo ...quasi mai accesa..<br><br><span class=\'highlight-blink\'>Info clicca su Contattaci<br>in fondo alla pagina', 'tv1.webp', 'tv2.jpg', 'Prezzo: €400')">
        <img src="tv1.webp" alt="TV 65 pollici">
        <h2>TV 65 pollici</h2>
	<p class="price"><strong>Prezzo: €400</strong></p>
        <p>TV 65 pollici usata pochissimo ...quasi mai accesa.<br><br>articoli esempio sito dimostrativo</p>
      </div>

      <div class="product" ontouchstart="evidenzia(this)" onclick="mostraDettaglio('T-Shirt personalizzata', 'T-Shirt personalizzabile come vuoi tu..<br><br><span class=\'highlight-blink\'>Info clicca su Contattaci<br>in fondo alla pagina', 'maglia1.png', 'maglia1.png', 'Prezzo: €15')">
        <img src="maglia1.png" alt="T-Shirt personalizzata">
        <h2>T-Shirt personalizzata</h2>
	<p class="price"><strong>Prezzo: €15</strong></p>
        <p>T-Shirt personalizzabile come vuoi tu.<br><br>articoli esempio sito dimostrativo</p>
      </div>

      <div class="product" ontouchstart="evidenzia(this)" onclick="mostraDettaglio('Tutina Sangallo (Cintura Inclusa)', 'Completo estivo per bambina elegante e fresco di colore verde acqua.<br><br><span class=\'highlight-blink\'>Info clicca su Contattaci<br>in fondo alla pagina', 'bambina1.webp', 'bambina2.webp', 'Prezzo: €24.90')">
        <img src="bambina1.jpg" alt="Tutina bambina (Cintura Inclusa)">
        <h2>Tutina bambina</h2>
	<p class="price"><strong>Prezzo: €24.90</strong></p>
        <p>Completo estivo per bambina elegante e fresco di colore verde acqua.<br><br>articoli esempio sito dimostrativo</p>
      </div>


<!articolo succesivo -->




    </div>

    <!-- Dettaglio Articolo -->
    <div id="dettaglio-articolo" style="display:none; background: white; padding: 1rem; border-radius: 8px;">
      <h2 id="titolo-articolo"></h2>
      <p id="prezzo-articolo" class="price" style="font-weight: bold; font-size: 1.2rem;"></p>
      <p id="descrizione-articolo"></p>
      <img id="foto1-articolo" src="">
      <img id="foto2-articolo" src="">

<!-- Nuovo bottone per aggiungere al carrello -->
  <button onclick="aggiungiAlCarrello(document.getElementById('titolo-articolo').textContent, document.getElementById('prezzo-articolo').textContent)" class="contact-button">Aggiungi al Carrello</button>

<p id="conferma-aggiunta" style="display: none; color: #6e3b6e; font-weight: bold; text-align: center;"></p>


      <br>
      <button onclick="tornaAllaHome()" class="contact-button">Torna alla home</button>
    </div>

    <button class="contact-button" onclick="toggleModal()">Contattaci</button>
  </div>

  <div class="modal" id="modal" onclick="toggleModal()">
  <h3>Chi siamo</h3>
  <p>Siamo un piccolo bazar online dedicato alla compravendita di articoli usati. La nostra missione è dare una seconda vita agli oggetti e offrire buone occasioni a chi cerca qualcosa di unico.</p>
  <p>Contattaci per maggiori informazioni sui prodotti!</p>
  <p><b>Telefono: 3516100235</b></p>
  <p><b>Email: laura.piovanelli1984@gmail.com</b></p>
</div>




  <footer>
    &copy; 2025 il bAzAr LaMuBy - Tutti i diritti riservati
    <div class="piva">P.IVA 04692000989</div>
  </footer>

  <script>

    function toggleModal() {
      document.getElementById('modal').classList.toggle('active');
      document.getElementById('overlay').classList.toggle('active');
    }

    function mostraDettaglio(titolo, descrizione, img1, img2, prezzo) {
  window.scrollTo(0, 0); // Porta subito la pagina all'inizio  	
  document.querySelector('.products').style.display = 'none';
  document.getElementById('dettaglio-articolo').style.display = 'block';
  document.getElementById('titolo-articolo').textContent = titolo;
  document.getElementById('descrizione-articolo').innerHTML = descrizione;
  document.getElementById('foto1-articolo').src = img1;
  document.getElementById('foto2-articolo').src = img2;
  document.getElementById('prezzo-articolo').textContent = prezzo;

}


   function tornaAllaHome() {
    document.getElementById('dettaglio-articolo').style.display = 'none';
    document.querySelector('.products').style.display = 'grid';
    window.scrollTo(0, 0); // Salta direttamente all'inizio della pagina
}

    function evidenzia(el) {
      el.classList.add("highlight");
      setTimeout(() => {
        el.classList.remove("highlight");
      }, 300);
    }

let carrello = [];

function aggiungiAlCarrello(nome, prezzo) {
    let prezzoNumerico = parseFloat(prezzo.replace(/[^\d.]/g, "")); // Rimuove simboli e converte in numero

    let articolo = carrello.find(item => item.nome === nome);
    if (articolo) {
        articolo.quantita++;
    } else {
        carrello.push({ nome, prezzo: prezzoNumerico, quantita: 1 });
    }
    salvaCarrelloLocalmente();
    aggiornaCarrello();
    // Mostra conferma (Corretta)
    let conferma = document.getElementById("conferma-aggiunta");
    conferma.textContent = `${nome} aggiunto al carrello!`;
    conferma.style.display = "block";

    setTimeout(() => {
        conferma.style.display = "none";
    }, 2000);
}

function salvaCarrelloLocalmente() {
    if (carrello.length > 0) {
        localStorage.setItem("carrello", JSON.stringify(carrello));
    }
}



function aggiornaCarrello() {
    let carrelloContainer = document.getElementById("lista-carrello");
    carrelloContainer.innerHTML = "";

    let totalePrezzo = 0;

    carrello.forEach(item => {
        if (!isNaN(item.prezzo)) { // Controlla che il prezzo sia valido
            totalePrezzo += item.prezzo * item.quantita;
        }

        let li = document.createElement("li");
        li.innerHTML = `${item.nome} - €${item.prezzo.toFixed(2)} (x${item.quantita}) 
                        <button onclick="rimuoviDalCarrello('${item.nome}')" style="background: #d9534f; color: white; border: none; padding: 0.5rem; border-radius: 5px; cursor: pointer; margin-left: 10px;">️</button>`;
        carrelloContainer.appendChild(li);
    });


    document.getElementById("contatore-carrello").textContent = carrello.reduce((sum, item) => sum + item.quantita, 0);

    document.getElementById("totale-prezzo").textContent = `Totale: €${totalePrezzo.toFixed(2)}`;
    
    // Mostra o nasconde i pulsanti in base al contenuto del carrello
    let btnSvuota = document.getElementById("btn-svuota");
    let btnProcedi = document.getElementById("btn-procedi");
    
    if (carrello.length === 0) {
        btnSvuota.style.display = "none";
        btnProcedi.style.display = "none";
    } else {
        btnSvuota.style.display = "block";
        btnProcedi.style.display = "block";
    }
}

function salvaOrdineSuFile() {
    let nome = document.getElementById("nome").value.trim();
    let indirizzo = document.getElementById("indirizzo").value.trim();
    let telefono = document.getElementById("telefono").value.trim();
    let email = document.getElementById("email").value.trim();

    // Verifica che tutti i dati siano compilati
    if (!nome || !indirizzo || !telefono || !email) {
        alert("Compila tutti i campi della spedizione prima di confermare l'ordine!");
        return;
    }

    let carrelloSalvato = localStorage.getItem("carrello");
    if (!carrelloSalvato || JSON.parse(carrelloSalvato).length === 0) {
        alert("Il carrello è vuoto, impossibile salvare l'ordine!");
        return;
    }

    let ordine = JSON.parse(carrelloSalvato);
    let dataOra = new Date().toLocaleString();
    let totalePrezzo = ordine.reduce((sum, item) => sum + item.prezzo * item.quantita, 0); // Calcola il totale

    let testoOrdine = `Ordine confermato\n====================\nData e ora: ${dataOra}\nDati di spedizione:\nNome: ${nome}\nIndirizzo: ${indirizzo}\nTelefono: ${telefono}\nEmail: ${email}\n--------------------\n`;

    ordine.forEach(item => {
        testoOrdine += `Prodotto: ${item.nome}\nPrezzo: €${item.prezzo.toFixed(2)}\nQuantità: ${item.quantita}\n--------------------\n`;
    });

    // Aggiungi il totale alla fine del file
    testoOrdine += `\n Totale dell'ordine: €${totalePrezzo.toFixed(2)}\n====================`;

   /* // Creazione del file di testo
    let blob = new Blob([testoOrdine], { type: "text/plain" });
    let link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "ordine.txt";

    // Simula il clic per scaricare il file
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
*/
    // Svuota il carrello dopo la conferma
    svuotaCarrello();

    // Mostra conferma visiva
    mostraPopupConferma();

    // Aggiorna il sito dopo 2 secondi
    /*setTimeout(() => {
        location.reload();
    }, 2000);*/
}



function inviaOrdineWhatsApp() {
    let nome = document.getElementById("nome").value.trim();
    let indirizzo = document.getElementById("indirizzo").value.trim();
    let telefono = document.getElementById("telefono").value.trim();
    let email = document.getElementById("email").value.trim();

    if (!nome || !indirizzo || !telefono || !email) {
        alert("Compila tutti i campi della spedizione prima di confermare l'ordine!");
        return;
    }

    let carrelloSalvato = localStorage.getItem("carrello");
    if (!carrelloSalvato || JSON.parse(carrelloSalvato).length === 0) {
        alert("Il carrello è vuoto, impossibile inviare l'ordine!");
        return;
    }

    let ordine = JSON.parse(carrelloSalvato);
    let totalePrezzo = ordine.reduce((sum, item) => sum + item.prezzo * item.quantita, 0);

    let messaggio = `✅ *Nuovo Ordine* \n\n Nome: ${nome}\n Indirizzo: ${indirizzo}\n Telefono: ${telefono}\n✉️ Email: ${email}\n\n *Prodotti Ordinati:* \n`;

    ordine.forEach(item => {
        messaggio += `- ${item.nome} | €${item.prezzo.toFixed(2)} x ${item.quantita}\n`;
    });

    messaggio += `\n *Totale Ordine:* €${totalePrezzo.toFixed(2)}\n\nGrazie per l'acquisto! `;

    let numeroWhatsApp = "3516100235"; // Sostituisci con il numero destinatario
    let urlWhatsApp = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(messaggio)}`;

    // Apri automaticamente WhatsApp
    window.open(urlWhatsApp, "_blank");

    // Mostra il popup di conferma ordine
    mostraPopupConferma();

    // Svuota il carrello dopo l'invio
    svuotaCarrello();

    // Aggiorna il sito dopo 2 secondi
    /*setTimeout(() => {
        location.reload();
    }, 2000);*/
}




function mostraCarrello() {
    document.getElementById("modal-carrello").classList.add("active");
    document.getElementById("overlay-carrello").classList.add("active");
}

function chiudiCarrello() {
    document.getElementById("modal-carrello").classList.remove("active");
    document.getElementById("overlay-carrello").classList.remove("active");
}


function svuotaCarrello() {
    carrello = [];
    localStorage.removeItem("carrello"); // Cancella i dati salvati
    aggiornaCarrello();
}

  

function rimuoviDalCarrello(nome) {
    let articolo = carrello.find(item => item.nome === nome);
    if (articolo) {
        if (articolo.quantita > 1) {
            articolo.quantita--;
        } else {
            carrello = carrello.filter(item => item.nome !== nome);
        }
    }
    salvaCarrelloLocalmente();
    aggiornaCarrello();
}

function caricaCarrello() {
    localStorage.removeItem("carrello"); // Cancella i dati salvati all'avvio
    carrello = []; // Resetta la variabile
    aggiornaCarrello(); // Assicura che i pulsanti siano gestiti correttamente
}



window.onload = function() {
    localStorage.removeItem("carrello"); // Cancella il carrello salvato
    carrello = []; // Azzeriamo la variabile
    aggiornaCarrello(); // Assicura che i pulsanti vengano gestiti correttamente
};

function mostraModuloSpedizione() {
    document.getElementById("modal-spedizione").style.display = "block";
}


function chiudiModuloSpedizione() {
    document.getElementById("modal-spedizione").style.display = "none";
}

function mostraPopupConferma() {
    document.getElementById("popup-conferma").style.display = "block";
}

function chiudiPopupConferma() {
    svuotaCarrello(); // Svuota il carrello quando si chiude il popup
    location.reload(); // Ricarica la pagina manualmente
}




  </script>
</body>
</html>
